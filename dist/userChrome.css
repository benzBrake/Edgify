@charset "UTF-8";
/********************************************************************************/
/* 参考:                                                                         */
/* https://github.com/QNetITQ/WaveFox                                           */
/********************************************************************************/
/* Windows has 1px missing space on top of window, but not when accent colour is
 * applied to the title bar. */
@media (-moz-platform: windows) and (not (-moz-windows-accent-color-in-titlebar)) {
  :root[sizemode=normal][customtitlebar]:not([inFullscreen]) #navigator-toolbox {
    padding-top: 1px !important;
  }
}
/* Add a shadow when the toolbars move over content, eg. in macOS hovering over
 * the menu bar in fullscreen mode. */
#navigator-toolbox[style*=transform] {
  box-shadow: 0 -3px 5px 3px light-dark(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6)) !important;
}

/* Since Firefox 120, when the bookmarks bar is set to only open on new tabs,
   * the bookmarks bar overlaps the #browser element. */
/* Change the element that shifts the browser content to the correct position. */
#main-window[BookmarksToolbarOverlapsBrowser] .newTabBrowserPanel,
#main-window[BookmarksToolbarOverlapsBrowser] #sidebar-box {
  padding-top: 0 !important;
  margin-top: 0 !important;
}

#main-window[BookmarksToolbarOverlapsBrowser] #browser {
  margin-top: var(--bookmarks-toolbar-overlapping-browser-height);
}

/* Make sure that the toolbars are not positioned in-front of the browser
   * element. */
#main-window[BookmarksToolbarOverlapsBrowser] #navigator-toolbox:not([style*=z-index]) {
  z-index: auto !important;
}

/* Move the browser element in-front of the toolbars when on the new tab page. */
#main-window:not([BookmarksToolbarOverlapsBrowser]) #browser {
  z-index: 1 !important;
}

/* 网页区域圆角 */
@media (-moz-pref("sidebar.revamp")) {
  #sidebar-box {
    padding-bottom: 0 !important;
  }
  #tabbrowser-tabbox,
  #tabbrowser-tabpanels,
  #tabbrowser-tabpanels browser {
    overflow: hidden !important;
    border-radius: var(--border-radius-medium) 0 0 var(--border-radius-medium) !important;
  }
}
@media (-moz-pref("sidebar.revamp")) and (not -moz-pref("sidebar.position_start")) {
  #tabbrowser-tabbox,
  #tabbrowser-tabpanels,
  #tabbrowser-tabpanels browser {
    border-radius: 0 var(--border-radius-medium) var(--border-radius-medium) 0 !important;
  }
}
/********************************************************************************/
/* 参考:                                                                         */
/* https://github.com/QNetITQ/WaveFox                                           */
/********************************************************************************/
@media (-moz-pref("sidebar.verticalTabs", false)) {
  /* ---------------------------------------- Density ---------------------------------------- */
  :root {
    --tab-min-height: 36px !important;
  }
  :root[uidensity=compact] {
    --tab-min-height: 32px !important;
  }
  :root[uidensity=touch] {
    --tab-min-height: 40px !important;
  }
  /* ---------------------------------------- Titlebar ---------------------------------------- */
  :root[customtitlebar] .browser-titlebar {
    will-change: auto !important;
    transition: none !important;
    opacity: 1 !important;
  }
  /* ---------------------------------------- Tabs ---------------------------------------- */
  @media (-moz-pref("extensions.activeThemeID", default-theme@mozilla.org)) or (-moz-pref("extensions.activeThemeID", firefox-compact-light@mozilla.org)) or (-moz-pref("extensions.activeThemeID", firefox-compact-dark@mozilla.org)) {
    .tabbrowser-tab[visuallyselected] .tab-background {
      background-color: var(--toolbar-bgcolor) !important;
    }
    .tabbrowser-tab[visuallyselected] .tab-content {
      color: var(--toolbar-color) !important;
    }
  }
  .tabbrowser-tab[pinned] .tab-content {
    padding-inline: calc((var(--tab-min-height) - 16px) / 2) !important;
  }
  .tabbrowser-tab:not([pinned]) .tab-content {
    padding-inline: 10px !important;
  }
  .tabbrowser-tab .tab-background {
    border-radius: var(--wavefox-tab-border-radius, 4px) !important;
    box-shadow: none !important;
  }
  .tabbrowser-tab .tab-close-button {
    width: 16px !important;
    height: 16px !important;
    border-radius: 50% !important;
    padding: 2px !important;
    margin: 0px !important;
  }
  /* ---------------------------------------- Indents ---------------------------------------- */
  #pinned-tabs-container {
    margin-inline-end: 0px !important;
  }
  /* ---------------------------------------- Attached tabs ---------------------------------------- */
  :root {
    --left-svg: url("images/left_corners.svg");
    --right-svg: url("images/right_corners.svg");
    --tab-first-last-inline-margin: calc(var(--tab-min-height) / 4);
  }
  /* ---------------------------------------- Main Window ---------------------------------------- */
  :root {
    --tabstrip-min-height: auto !important;
  }
  /* ---------------------------------------- Nav Bar ---------------------------------------- */
  #nav-bar {
    border: none !important;
  }
  /* ---------------------------------------- Tabs ---------------------------------------- */
  @media (-moz-pref("extensions.activeThemeID", default-theme@mozilla.org)) or (-moz-pref("extensions.activeThemeID", firefox-compact-light@mozilla.org)) or (-moz-pref("extensions.activeThemeID", firefox-compact-dark@mozilla.org)) {
    .tabbrowser-tab[visuallyselected] .tab-background {
      background-color: transparent !important;
      background-image: linear-gradient(to bottom, var(--tab-selected-bgcolor), var(--toolbar-bgcolor)) !important;
    }
  }
  .tabbrowser-tab {
    overflow-clip-margin: var(--tab-first-last-inline-margin) !important;
    padding-inline: 0px !important;
  }
  tab-group[collapsed] > .tabbrowser-tab {
    --tab-first-last-inline-margin: 0px;
  }
  .tabbrowser-tab[pinned] .tab-content {
    padding-inline: calc((var(--tab-min-height) - 16px) / 2 + 2px) !important;
  }
  .tabbrowser-tab[visuallyselected] {
    z-index: 2 !important;
  }
  .tabbrowser-tab:not([visuallyselected]) {
    z-index: 0 !important;
  }
  .tabbrowser-tab:not([visuallyselected])[multiselected] {
    z-index: 1 !important;
  }
  .tabbrowser-tab:not([visuallyselected])[multiselected] .tab-background {
    background-color: color-mix(in srgb, currentColor 30%, transparent) !important;
  }
  .tabbrowser-tab:not([visuallyselected])[multiselected] .tab-content {
    color: inherit !important;
  }
  .tabbrowser-tab .tab-background {
    margin-inline: calc(-1 * var(--tab-min-height) / 2) !important;
    margin-block: 0px !important;
    border-radius: 0px !important;
    outline: none !important;
    pointer-events: none !important;
    mask-image: var(--left-svg), linear-gradient(to bottom, black, black), var(--right-svg) !important;
    mask-size: contain !important;
    mask-position: left center, center center, right center !important;
    mask-repeat: no-repeat !important;
    mask-composite: exclude !important;
    mask-mode: alpha !important;
  }
  .tabbrowser-tab .tab-background .tab-context-line {
    margin: 0px !important;
  }
  .tabbrowser-tab .tab-background .tab-loading-burst::before {
    margin-inline-start: 0px !important;
  }
  .tabbrowser-tab .tab-background .tab-group-line {
    inset-inline: 0px !important;
    inset-block: auto 0px !important;
  }
  .tab-group-label-container {
    margin-inline: var(--toolbar-start-end-padding) !important;
    padding-inline: 0px !important;
  }
  .tab-group-label-container::after {
    inset-block: auto 0px !important;
  }
  tab-group:not([collapsed]) > .tab-group-label-container {
    margin-inline-end: 0px !important;
  }
  tab-group + tab-group > .tab-group-label-container, tab-group + .tabbrowser-tab[hidden] + tab-group > .tab-group-label-container {
    margin-inline-start: 0px !important;
  }
  .tabbrowser-tab:not([hidden]) + tab-group > .tab-group-label-container, .tabbrowser-tab:not([hidden]) + .tabbrowser-tab[hidden] + tab-group > .tab-group-label-container {
    margin-inline-start: var(--tab-first-last-inline-margin) !important;
  }
  tab-group[collapsed]:has(+ .tabbrowser-tab:not([hidden])) > .tab-group-label-container, tab-group[collapsed]:has(+ .tabbrowser-tab[hidden] + .tabbrowser-tab:not([hidden])) > .tab-group-label-container {
    margin-inline-end: var(--tab-first-last-inline-margin) !important;
  }
  tab-group[collapsed]:has(+ .tabbrowser-tab:nth-child(1 of .tabbrowser-tab:not([hidden]))) > .tab-group-label-container {
    margin-inline-end: 0px !important;
  }
  .tabbrowser-tab:nth-last-child(1 of .tabbrowser-tab:not([hidden])) + tab-group > .tab-group-label-container {
    margin-inline-start: 0px !important;
  }
  #tabbrowser-tabs[overflow] .tab-drop-indicator {
    inset-inline-start: var(--tab-first-last-inline-margin) !important;
  }
  /* -------------------- Tab Icon Indicators -------------------- */
  .tabbrowser-tab:is([image], [pinned]) .tab-content[attention]:not([selected]),
  .tab-content[pinned][titlechanged]:not([selected]) {
    background-position: 50% calc(50% + 12px) !important;
  }
  /* ---------------------------------------- Tab Bar ---------------------------------------- */
  #TabsToolbar #search-container {
    padding-block: 0 !important;
  }
  /* ---------------------------------------- Indents ---------------------------------------- */
  #pinned-tabs-container:not([overflowing]):has(.tabbrowser-tab) ~ #tabbrowser-arrowscrollbox:not([overflowing]):has(.tabbrowser-tab:nth-child(1 of :not([hidden]))) {
    margin-inline-start: calc(-2 * var(--tab-first-last-inline-margin)) !important;
  }
  .tabbrowser-tab:nth-child(1 of .tabbrowser-tab:not([hidden], [dragtarget])) {
    margin-inline-start: var(--tab-first-last-inline-margin) !important;
  }
  .tabbrowser-tab:nth-last-child(1 of .tabbrowser-tab:not([hidden], [dragtarget])) {
    margin-inline-end: var(--tab-first-last-inline-margin) !important;
  }
  /* ---------------------------------------- Tab Scroll Animation ---------------------------------------- */
  #tabbrowser-tabs[overflow]:not([movingtab]) .tabbrowser-tab {
    pointer-events: none !important;
    box-sizing: content-box !important;
    padding-inline: var(--tab-first-last-inline-margin) !important;
    margin-inline: calc(-1 * var(--tab-first-last-inline-margin)) !important;
    overflow-clip-margin: 0px !important;
  }
  #tabbrowser-tabs[overflow]:not([movingtab]) .tabbrowser-tab > .tab-stack {
    pointer-events: auto !important;
  }
  #tabbrowser-tabs[overflow]:not([movingtab]) .tabbrowser-tab:nth-child(1 of .tabbrowser-tab:not([hidden])) {
    margin-inline-start: 0px !important;
  }
  #tabbrowser-tabs[overflow]:not([movingtab]) .tabbrowser-tab:nth-last-child(1 of .tabbrowser-tab:not([hidden])) {
    margin-inline-end: 0px !important;
  }
  /* -------------------- Media Icons -------------------- */
  /* Pinned Tabs */
  .tabbrowser-tab[pinned]:not([crashed]) .tab-icon-overlay {
    background-color: transparent !important;
    background-image: none !important;
    fill: currentColor !important;
    border-radius: 50px !important;
    top: -8px !important;
    inset-inline-end: -8px !important;
  }
  .tabbrowser-tab[pinned]:not([crashed]) .tab-icon-overlay:hover {
    background-color: color-mix(in srgb, currentColor 15%, transparent) !important;
  }
  .tabbrowser-tab[pinned]:not([crashed]) .tab-icon-overlay:hover:active {
    background-color: color-mix(in srgb, currentColor 30%, transparent) !important;
  }
  .tabbrowser-tab[pinned]:not([crashed]):where([soundplaying], [muted], [activemedia-blocked]) .tab-icon-stack > :not(.tab-icon-overlay) {
    mask-image: linear-gradient(to bottom, black, black), radial-gradient(circle at right top, black 8px, transparent 9px) !important;
    mask-size: 16px 16px !important;
    mask-position: center center !important;
    mask-repeat: no-repeat !important;
    mask-composite: exclude !important;
    mask-mode: alpha !important;
  }
  :root:-moz-locale-dir(rtl) .tabbrowser-tab[pinned]:not([crashed]):where([soundplaying], [muted], [activemedia-blocked]) .tab-icon-stack > :not(.tab-icon-overlay) {
    mask-image: linear-gradient(to bottom, black, black), radial-gradient(circle at left top, black 8px, transparent 9px) !important;
  }
  /* Regular Tabs */
  .tabbrowser-tab:not([pinned], [crashed]) .tab-icon-overlay {
    background-color: currentColor !important;
    border-radius: 50px !important;
    top: 0px !important;
    inset-inline-end: 0px !important;
    mask-image: var(--mask-overlay-background, none), var(--mask-overlay-image, none) !important;
    mask-size: 16px 16px, 12px 12px !important;
    mask-position: center center !important;
    mask-repeat: no-repeat !important;
    mask-mode: alpha !important;
  }
  .tabbrowser-tab:not([pinned], [crashed]) .tab-icon-overlay:hover {
    --mask-overlay-background: linear-gradient(to bottom, rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.15));
  }
  .tabbrowser-tab:not([pinned], [crashed]) .tab-icon-overlay:hover:active {
    --mask-overlay-background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3));
  }
  .tabbrowser-tab:not([pinned], [crashed])[soundplaying] .tab-icon-overlay {
    --mask-overlay-image: url("chrome://browser/skin/tabbrowser/tab-audio-playing-small.svg");
  }
  .tabbrowser-tab:not([pinned], [crashed])[muted] .tab-icon-overlay {
    --mask-overlay-image: url("chrome://browser/skin/tabbrowser/tab-audio-muted-small.svg");
  }
  .tabbrowser-tab:not([pinned], [crashed])[activemedia-blocked] .tab-icon-overlay {
    --mask-overlay-image: url("chrome://browser/skin/tabbrowser/tab-audio-blocked-small.svg");
  }
  .tabbrowser-tab:not([pinned], [crashed]):where([busy], [image], [sharing], [pictureinpicture]) .tab-icon-overlay {
    top: -8px !important;
    inset-inline-end: -8px !important;
  }
  .tabbrowser-tab:not([pinned], [crashed]):where([soundplaying], [muted], [activemedia-blocked]) .tab-icon-stack > :not(.tab-icon-overlay) {
    mask-image: linear-gradient(to bottom, black, black), radial-gradient(circle at right top, black 8px, transparent 9px) !important;
    mask-size: 16px 16px !important;
    mask-position: center center !important;
    mask-repeat: no-repeat !important;
    mask-composite: exclude !important;
    mask-mode: alpha !important;
  }
  :root:-moz-locale-dir(rtl) .tabbrowser-tab:not([pinned], [crashed]):where([soundplaying], [muted], [activemedia-blocked]) .tab-icon-stack > :not(.tab-icon-overlay) {
    mask-image: linear-gradient(to bottom, black, black), radial-gradient(circle at left top, black 8px, transparent 9px) !important;
  }
  .tabbrowser-tab:not([pinned], [crashed]):where([soundplaying], [muted], [activemedia-blocked]) .tab-icon-overlay {
    display: revert !important;
  }
  .tabbrowser-tab:not([pinned])[fadein] {
    min-width: var(--tab-min-width-pref) !important;
  }
  tab-group[collapsed] > .tabbrowser-tab:not([pinned])[fadein] {
    min-width: 0px !important;
  }
  .tabbrowser-tab:not([pinned]) .tab-icon-stack > * {
    margin-inline-end: 8px !important;
  }
  .tabbrowser-tab:not([pinned]) .tab-audio-button {
    display: none !important;
  }
  /* ---------- Picture-In-Picture ---------- */
  .tabbrowser-tab[pictureinpicture]:not([crashed], [busy]) .tab-icon-stack::before {
    content: "";
    display: block;
    position: absolute;
    width: 16px;
    height: 16px;
    background-color: currentColor;
    mask-size: 16px 16px;
    mask-position: center center;
    mask-repeat: no-repeat;
    mask-mode: alpha;
  }
  :root:-moz-locale-dir(rtl) .tabbrowser-tab[pictureinpicture]:not([crashed], [busy]) .tab-icon-stack::before {
    transform: rotateY(180deg);
  }
  .tabbrowser-tab[pictureinpicture]:not([crashed], [busy]) .tab-icon-stack > :not(.tab-icon-overlay) {
    position: relative !important;
    padding: 2px !important;
    inset-inline-start: 8px !important;
    top: 8px !important;
    mask-image: none !important;
    box-sizing: border-box !important;
    z-index: 1 !important;
  }
  .tabbrowser-tab[pictureinpicture]:not([crashed], [busy]):not([soundplaying], [muted], [activemedia-blocked]) .tab-icon-stack::before {
    mask-image: linear-gradient(to bottom, black, black), linear-gradient(to bottom, black, black), url("chrome://global/skin/media/picture-in-picture-open.svg");
    mask-size: 8px 8px, 8px 8px, 16px 16px;
    mask-position: right bottom, right bottom, center center;
    mask-repeat: no-repeat;
    mask-composite: exclude, add;
  }
  .tabbrowser-tab[pictureinpicture]:not([crashed], [busy]):is([soundplaying], [muted], [activemedia-blocked]) .tab-icon-stack::before {
    mask-image: linear-gradient(to bottom, black, black), linear-gradient(to bottom, black, black), url("chrome://global/skin/media/picture-in-picture-open.svg");
    mask-size: 8px 16px, 8px 16px, 16px 16px;
    mask-position: right bottom, right bottom, center center;
    mask-repeat: no-repeat;
    mask-composite: exclude, add;
  }
  /* -------------------- Tab Text -------------------- */
  .tab-label-container {
    height: auto !important;
    font-size: clamp(0px, 1em, 16px) !important;
    mask-image: none !important;
  }
  .tab-label {
    width: 100% !important;
    height: auto !important;
    line-height: normal !important;
    overflow: hidden !important;
    white-space: nowrap !important;
    text-overflow: ellipsis !important;
    margin-block: 0px !important;
  }
  .tab-secondary-label {
    display: none !important;
  }
  /* ---------------------------------------- Firefox View ---------------------------------------- */
  :where(toolbarbutton, toolbarpaletteitem) + #tabbrowser-tabs {
    border-inline-start: none !important;
    padding-inline-start: var(--tab-overflow-pinned-tabs-width) !important;
    margin-inline-start: 0px !important;
  }
  #TabsToolbar #firefox-view-button[open] > .toolbarbutton-icon {
    background-color: var(--toolbarbutton-active-background) !important;
    color: inherit !important;
    box-shadow: none !important;
    outline: none !important;
  }
  /* -------------------- Extensions menu -------------------- */
  #unified-extensions-panel {
    --uei-icon-size: 24px !important;
  }
  #unified-extensions-panel .unified-extensions-item {
    margin-block: 0px !important;
  }
  #unified-extensions-panel :is(.unified-extensions-item-name,
  .unified-extensions-item-message-deck > *) {
    overflow: hidden !important;
    white-space: nowrap !important;
    text-overflow: ellipsis !important;
  }
  /* ---------------------------------------- Tab Bar ---------------------------------------- */
  #TabsToolbar {
    --toolbarbutton-inner-padding: inherit !important;
  }
  /* ---------------------------------------- Indents ---------------------------------------- */
  #TabsToolbar-customization-target > :is(toolbarbutton, toolbaritem):first-child,
  #TabsToolbar-customization-target > toolbarpaletteitem:first-child > :is(toolbarbutton, toolbaritem) {
    margin-inline-start: calc(var(--toolbar-start-end-padding) - var(--toolbarbutton-outer-padding)) !important;
  }
  #TabsToolbar-customization-target > :is(toolbarbutton, toolbaritem):last-child,
  #TabsToolbar-customization-target > toolbarpaletteitem:last-child > :is(toolbarbutton, toolbaritem) {
    margin-inline-end: calc(var(--toolbar-start-end-padding) - var(--toolbarbutton-outer-padding)) !important;
  }
  .tabbrowser-tab:not([hidden]) + #tabbrowser-arrowscrollbox-periphery > #tabs-newtab-button,
  .tabbrowser-tab:not([hidden]) + .tabbrowser-tab[hidden] + #tabbrowser-arrowscrollbox-periphery > #tabs-newtab-button {
    margin-inline-start: calc(-1 * var(--tab-first-last-inline-margin, 0px) / 2) !important;
  }
  /* ---------------------------------------- Separators ---------------------------------------- */
  .tab-stack {
    margin-inline-end: 1px !important;
  }
  .tabbrowser-tab:nth-child(1 of .tabbrowser-tab:not([hidden])) > .tab-stack::before,
  tab-group + .tabbrowser-tab > .tab-stack::before,
  tab-group + .tabbrowser-tab[hidden] + .tabbrowser-tab > .tab-stack::before,
  .tab-stack::after {
    content: "";
    display: block;
    position: absolute;
    width: 1px;
    height: 50%;
    border-inline-end: 1px solid currentColor;
    top: 25%;
    opacity: var(--separators-color-saturation);
    box-sizing: border-box;
    pointer-events: none;
  }
  .tab-stack::before {
    inset-inline-end: calc(100% + var(--tab-overflow-clip-margin));
  }
  .tab-stack::after {
    inset-inline-start: calc(100% + var(--tab-overflow-clip-margin));
  }
  .tabbrowser-tab:not([hidden]):is([selected], :hover, [multiselected], [dragover-createGroup]) .tab-stack::before,
  .tabbrowser-tab:not([hidden]):is([selected], :hover, [multiselected], [dragover-createGroup]) .tab-stack::after,
  .tabbrowser-tab:not([hidden]):has(+ .tabbrowser-tab[dragover-createGroup]) .tab-stack::after,
  #tabbrowser-tabs:not([movingtab]) .tabbrowser-tab:not([hidden]):has(+ .tabbrowser-tab:is([selected], :hover, [multiselected]):not([hidden])) .tab-stack::after,
  #tabbrowser-tabs:not([movingtab]) .tabbrowser-tab:not([hidden]):has(+ .tabbrowser-tab[hidden] + .tabbrowser-tab:is([selected], :hover, [multiselected]):not([hidden])) .tab-stack::after,
  #pinned-tabs-container:not([overflowing]):has(.tabbrowser-tab) ~ #tabbrowser-arrowscrollbox:not([overflowing]) > .tabbrowser-tab:nth-child(1 of :not([hidden])) > .tab-stack::before,
  #pinned-tabs-container:not([overflowing]):has(~ #tabbrowser-arrowscrollbox:not([overflowing]) > .tabbrowser-tab:is([selected], :hover, [multiselected], [dragover-createGroup]):nth-child(1 of :not([hidden]))) > .tabbrowser-tab:last-child > .tab-stack::after {
    opacity: 0 !important;
  }
  :root {
    --separators-color-saturation: 0.5;
  }
  /* ---------------------------------------- Shadows ---------------------------------------- */
  @media (-moz-pref("extensions.activeThemeID", default-theme@mozilla.org)) or (-moz-pref("extensions.activeThemeID", firefox-compact-light@mozilla.org)) or (-moz-pref("extensions.activeThemeID", firefox-compact-dark@mozilla.org)) {
    :root {
      --wavefox-selected-tab-filter-offset-x: 0px;
      --wavefox-selected-tab-filter-offset-y: 0px;
      --wavefox-selected-tab-filter-blur: 2px;
      --wavefox-selected-tab-filter-color: rgb(0, 0, 0);
      --wavefox-selected-tab-shadow-offset-x: 0px;
      --wavefox-selected-tab-shadow-offset-y: 0px;
      --wavefox-selected-tab-shadow-blur: 4px;
      --wavefox-selected-tab-shadow-spread: 0px;
      --wavefox-selected-tab-shadow-color: rgb(0, 0, 0);
      --wavefox-inner-tabbar-shadow-offset-x: 0px;
      --wavefox-inner-tabbar-shadow-offset-y: -4px;
      --wavefox-inner-tabbar-shadow-blur: 4px;
      --wavefox-inner-tabbar-shadow-spread: -4px;
      --wavefox-inner-tabbar-shadow-color: rgb(0, 0, 0);
      --wavefox-selected-tab-filter: drop-shadow(var(--wavefox-selected-tab-filter-offset-x) var(--wavefox-selected-tab-filter-offset-y) var(--wavefox-selected-tab-filter-blur) color-mix(in srgb, var(--wavefox-selected-tab-filter-color) var(--wavefox-filter-shadow-saturation, 0%), transparent));
      --wavefox-selected-tab-shadow: var(--wavefox-selected-tab-shadow-offset-x) var(--wavefox-selected-tab-shadow-offset-y) var(--wavefox-selected-tab-shadow-blur) var(--wavefox-selected-tab-shadow-spread) color-mix(in srgb, var(--wavefox-selected-tab-shadow-color) var(--wavefox-filter-shadow-saturation, 0%), transparent);
      --wavefox-inner-tabbar-shadow: inset var(--wavefox-inner-tabbar-shadow-offset-x) var(--wavefox-inner-tabbar-shadow-offset-y) var(--wavefox-inner-tabbar-shadow-blur) var(--wavefox-inner-tabbar-shadow-spread) color-mix(in srgb, var(--wavefox-inner-tabbar-shadow-color) var(--wavefox-filter-shadow-saturation, 0%), transparent);
    }
    @media (prefers-color-scheme: light) {
      :root {
        --wavefox-filter-shadow-saturation: 20%;
      }
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --wavefox-filter-shadow-saturation: 75%;
      }
    }
    #TabsToolbar {
      position: relative !important;
      clip-path: inset(0px) !important;
    }
    #TabsToolbar::before {
      content: "";
      display: block;
      position: absolute;
      width: 100%;
      height: 100%;
      bottom: 0px;
      inset-inline-start: 0px;
      box-shadow: var(--wavefox-inner-tabbar-shadow);
      pointer-events: none;
      z-index: 2;
    }
    .tabbrowser-tab[visuallyselected] {
      filter: var(--wavefox-selected-tab-filter) !important;
    }
  }
  .titlebar-spacer[type=pre-tabs] {
    display: none !important;
  }
  .titlebar-spacer[type=post-tabs] {
    width: 12px !important;
  }
  /* ---------- Opaque toolbar ---------- */
}
@media (-moz-pref("sidebar.verticalTabs", false)) and (-moz-platform: windows) and (-moz-pref("widget.windows.mica")) and (-moz-pref("extensions.activeThemeID", default-theme@mozilla.org)) and (-moz-pref("browser.tabs.inTitlebar", 1)) {
  :root {
    --toolbar-bgcolor: light-dark(#f9f9fb, rgb(43, 42, 51)) !important;
  }
}
@media (-moz-pref("sidebar.verticalTabs", false)) and (-moz-pref("extensions.activeThemeID", default-theme@mozilla.org)) and (-moz-pref("browser.tabs.inTitlebar", 1)) {
  :root {
    --wavefox-selected-tab-filter: none !important;
    --wavefox-selected-tab-shadow: none !important;
    --wavefox-inner-tabbar-shadow: none !important;
    --toolbar-transparency-level: 50%;
  }
  .tabbrowser-tab[visuallyselected] .tab-background,
  #nav-bar,
  #nav-bar::before,
  #PersonalToolbar {
    background-color: color-mix(in srgb, var(--toolbar-bgcolor) var(--toolbar-transparency-level), transparent) !important;
  }
}
/********************************************************************************/
/* 参考:                                                                         */
/* https://github.com/QNetITQ/WaveFox                                           */
/********************************************************************************/
/*
  MARK: Findbar textbox
*/
.findbar-textbox {
  border: 0 !important;
  border-radius: var(--toolbarbutton-border-radius) !important;
  background-color: var(--toolbar-field-background-color) !important;
  /* Add shadow when in light mode with no theme applied, like the URL bar. */
}
:root:not([lwtheme]) .findbar-textbox {
  box-shadow: 0 0 4px light-dark(rgba(0, 0, 0, 0.1), transparent) !important;
}
.findbar-textbox:focus {
  outline-width: 2px !important;
  outline-offset: -1px !important;
}
.findbar-textbox[status=notfound] {
  outline: 2px solid var(--input-error-border-color, #E22850) !important;
  outline-offset: -1px !important;
}

/* Prevent focus outline from being cut off on the findbar textbox. */
.findbar-container {
  overflow-inline: visible !important;
  /* Add ability to drag window from empty space in the findbar. */
}
.findbar-container::after {
  content: "";
  flex: 1;
  align-self: stretch;
  margin-block: -6px;
  -moz-window-dragging: drag;
}

/*
  MARK: Findbar buttons
*/
.findbar-find-previous,
.findbar-find-next,
findbar .close-icon {
  border-radius: var(--toolbarbutton-border-radius) !important;
}
.findbar-find-previous:not([disabled]):hover,
.findbar-find-next:not([disabled]):hover,
findbar .close-icon:not([disabled]):hover {
  background-color: var(--toolbarbutton-hover-background, rgba(190, 190, 190, 0.2)) !important;
}
.findbar-find-previous:not([disabled]):hover:active,
.findbar-find-next:not([disabled]):hover:active,
findbar .close-icon:not([disabled]):hover:active {
  background-color: var(--toolbarbutton-active-background, rgba(190, 190, 190, 0.4)) !important;
}

findbar {
  border: none !important;
  margin-bottom: var(--uc-tweak-rounded-corners-padding, 0px) !important;
  background-color: transparent !important;
  padding-inline: var(--uc-tweak-rounded-corners-padding, 0px) !important;
}
findbar[hidden] {
  margin-bottom: calc(var(--uc-tweak-rounded-corners-padding, 0px) - 40px) !important;
}

/********************************************************************************/
/* 参考:                                                                         */
/* https://github.com/aris-t2/customcssforfx                                    */
/********************************************************************************/
:root menupopup,
:root panel {
  --menuitem-padding-inline: 1em;
  --icon-pre-padding: var(--menuitem-padding-inline);
  --icon-gap: 8px;
  --icon-size: 16px;
  /* 基础缩进值：用于对齐没有图标的菜单项 */
  --panel-item-indent-base: calc(var(--icon-pre-padding) + var(--icon-size) + var(--icon-gap));
  /* 面板子视图缩进值 (如书签、历史记录面板) */
  --panel-item-indent-button: calc(var(--panel-item-indent-base) - 8px);
  /* 主菜单面板缩进值 (汉堡菜单) */
  --panel-item-indent-app-menu: calc(var(--panel-item-indent-base) - 0px);
  /* 分隔符末端外边距：用于缩短特定分隔符的长度 */
  --panel-separator-end-margin: calc(var(--panel-item-indent-base) - 22px);
  --panel-background: Field !important;
  --panel-background: light-dark(#fff, #353d49) !important;
  --panel-color: light-dark(#1c1c1c, #fff) !important;
  --panel-dimmed: color-mix(in srgb, currentColor 17%, transparent) !important;
  --panel-dimmed-further: color-mix(in srgb, currentColor 30%, transparent) !important;
  --panel-border-radius: 6px;
  --panel-list-border-radius: 4px;
  --panel-border: 1px solid var(--arrowpanel-border-color);
  --panel-margin-block: 4px;
  --panel-margin-inline: 4px;
  --panel-shadow:
      0 1px 2px 1px rgba(0, 0, 0, .1),
      0 1px 5px -3px rgba(0, 0, 0, .1),
      0 6px 10px 1px rgba(0, 0, 0, .1),
      0 4px 12px 2px rgba(0, 0, 0, .1);
}
:root menu,
:root menuitem {
  --menuitem-padding: .5em var(--menuitem-padding-inline) !important;
  --menuitem-margin: 0 4px !important;
}
:root[uidensity=compact] menupopup,
:root[uidensity=compact] panel {
  --menuitem-padding-inline: 8px;
  --panel-item-indent-button: calc(var(--panel-item-indent-base) - 4px);
  --panel-border-radius: 4px;
  --panel-list-border-radius: 3px;
  --panel-margin-block: 2px;
  --panel-margin-inline: 2px;
  --icon-gap: 6px;
}
:root[uidensity=compact] menu,
:root[uidensity=compact] menuitem {
  --menuitem-margin: 0 2px !important;
}

/* 调整缩进 */
:is(popup, menupopup)[type=arrow] :is(menu, menuitem):not(:is([checked], .menu-iconic, .menuitem-iconic)) {
  padding-inline-start: var(--panel-item-indent-base) !important;
}

.PanelUI-subView .subviewbutton:not(#appMenu-fxa-status2):not(.menuitem-iconic):not(.menu-iconic):not(.subviewbutton-iconic):not(.all-tabs-close-button) {
  padding-inline-start: var(--panel-item-indent-button) !important;
}

#PanelUI-bookmarks .subviewbutton:not(#appMenu-fxa-status2):not(.menuitem-iconic):not(.menu-iconic):not(.subviewbutton-iconic),
#PanelUI-history .subviewbutton:not(#appMenu-fxa-status2):not(.menuitem-iconic):not(.menu-iconic):not(.subviewbutton-iconic),
#appMenu-popup .PanelUI-subView .subviewbutton:not(#appMenu-fxa-status2):not(.menuitem-iconic):not(.menu-iconic):not(.subviewbutton-iconic) {
  padding-inline-start: var(--panel-item-indent-app-menu) !important;
}

/** 显示 addMenu 菜单图标 */
:is(#contentAreaContextMenu, #tabContextMenu)[photoncompact=true]:not([needsgutter]) > .addMenu:is(menu, menuitem) > :is(.menu-iconic-left, .menu-icon),
:is(#contentAreaContextMenu, #tabContextMenu)[photoncompact=true]:not([needsgutter]) > menugroup.addMenu > .addMenu.showText > :is(.menu-iconic-left, .menu-icon),
:is(#contentAreaContextMenu, #tabContextMenu)[photoncompact=true]:not([needsgutter]) > menugroup.addMenu.showText > .addMenu > :is(.menu-iconic-left, .menu-icon),
:is(#contentAreaContextMenu, #tabContextMenu)[photoncompact=true]:not([needsgutter]) > menugroup.addMenu.showFirstText > .menuitem-iconic:first-child > :is(.menu-iconic-left, .menu-icon),
#tabContextMenu[photoncompact=true] #OpenWithHelper-Tab-Menu > :is(.menu-iconic-left, .menu-icon) {
  visibility: visible !important;
  display: flex !important;
}

@media (-moz-platform: windows) {
  :not(#context-navigation) > :is(menu, menuitem) > .menu-icon {
    width: var(--icon-size, 16px) !important;
    height: var(--icon-size, 16px) !important;
    margin-inline-end: var(--icon-gap) !important;
  }
  :is(popup, menupopup) :is(menu, menuitem) > .menu-icon {
    display: flex !important;
  }
  #context-navigation {
    margin-inline: var(--panel-margin-inline) !important;
  }
}
/* 颜色 */
menupopup,
panel[type=autocomplete-richlistbox],
menulist > menupopup > menucaption {
  -moz-window-shadow: none !important;
  background: 0 !important;
  border: 0 !important;
  color: var(--panel-color) !important;
  box-sizing: content-box !important;
  color: inherit !important;
}

.panel-arrowcontent {
  background: 0 !important;
  padding: 0 !important;
  box-shadow: none !important;
  font: -moz-pull-down-menu !important;
  border: 0 !important;
}

.popup-internal-box,
#PopupSearchAutoComplete > *,
.menupopup-arrowscrollbox {
  background: var(--panel-background) !important;
}

.menupopup-arrowscrollbox {
  background: var(--panel-background) !important;
}

@media (prefers-color-scheme: dark) {
  /* 深色模式菜单背景颜色 */
  panel[type=autocomplete-richlistbox],
  .menupopup-arrowscrollbox {
    background-color: #353d49 !important;
  }
}
/* 圆角 */
menupopup,
.menupopup-arrowscrollbox {
  border-radius: var(--panel-border-radius) !important;
}

/* themes a menupopup (or other root level / shadow dom popup) as a panel */
/* Mozilla's use of shadow dom means we can't use a menupopup > .popup-internal-box */
.popup-internal-box,
#PopupAutoComplete > .autocomplete-richlistbox,
.menupopup-arrowscrollbox {
  background: var(--panel-background) !important;
  border: 1px solid var(--panel-border-color) !important;
  padding: var(--panel-margin-block) 0 !important;
}

.popup-internal-box,
.menupopup-arrowscrollbox {
  border: var(--panel-border) !important;
}

#PopupSearchAutoComplete > * {
  border-radius: 0 !important;
}

#PopupSearchAutoComplete > :first-child {
  border-radius: var(--panel-list-border-radius) var(--panel-list-border-radius) 0 0 !important;
}

#PopupSearchAutoComplete > :last-child {
  border-radius: 0 0 var(--panel-list-border-radius) var(--panel-list-border-radius) !important;
}

/* autocomplete panel can't overlap the textbox, so shadow can't go up
   more than 1px */
panel[type=autocomplete-richlistbox] > .autocomplete-richlistbox {
  box-shadow: var(--panel-shadow) !important;
  border: var(--panel-border) !important;
}

/* search panel gets special treatment; it has multiple children */
#PopupSearchAutoComplete > .autocomplete-richlistbox {
  box-shadow: none !important;
}

#PopupSearchAutoComplete {
  filter: drop-shadow(0 8px 6px rgba(0, 0, 0, 0.25)) drop-shadow(0 1px 1px rgba(0, 0, 0, 0.125)) !important;
}

/* reset non-layout props when embedded in a panel
   (panel handles panel theming in this case) */
.panel-arrowcontent > .popup-internal-box {
  background: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* shotgun approach to undo this selector...
   #BMB_bookmarksPopup menupopup[placespopup="true"]:-moz-lwtheme::part(innerbox)
   ...without being able to use ::part() in userChrome.css */
[part=innerbox] {
  box-shadow: none !important;
  margin: 0 !important;
}

.autocomplete-richlistitem {
  height: 30px !important;
  border: 0 !important;
  color: inherit !important;
  fill-opacity: initial !important;
}
:root[uidensity=compact] .autocomplete-richlistitem {
  height: 26px !important;
}

menupopup :is(menu, menuitem) {
  height: 30px !important;
}
:root[uidensity=compact] menupopup :is(menu, menuitem) {
  height: 26px !important;
}

/* 修复输入框下拉菜单选中样式 */
.autocomplete-richlistitem[selected] {
  color: #ffffff !important;
}

menupopup menu[_moz-menuactive=true],
menupopup menuitem[_moz-menuactive=true],
menupopup menuitem:hover:not([disabled=true]),
menupopup menu:hover:not([disabled=true]),
.autocomplete-richlistitem:hover:not([disabled=true]):not([selected=true]) {
  background-color: var(--panel-dimmed) !important;
}

/* disable vertical menu scroll buttons and use a good ol' scrollbar */
/* this is a shotgun approach, expect side effects */
scrollbox[orient=vertical] {
  overflow-y: auto !important;
}

/* this is a bit depressing... */
/* work around lack of ::part selector support */
:root {
  --scrollbutton-display: -moz-box !important;
}

.menuitem-iconic:not([data-usercontextid]),
.menu-iconic-icon,
:not([data-usercontextid]) > .menu-icon {
  fill: currentColor !important;
  -moz-context-properties: fill, fill-opacity, stroke, stroke-opacity !important;
}